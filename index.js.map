{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// pixabay-api.js\nimport axios from 'axios';\n\nconst API_KEY = '48303483-31cfd41ec7662904a2a6a727b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  const response = await axios.get(url);\n  if (response.status !== 200) {\n    throw new Error('Failed to fetch images');\n  }\n  return response.data;\n}\n","// render-functions.js\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImageCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery-item\" title=\"${tags}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b>${likes}</p>\n        <p class=\"info-item\"><b>Views</b>${views}</p>\n        <p class=\"info-item\"><b>Comments</b>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = images.map(createImageCard).join('');\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nexport function appendImages(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', images.map(createImageCard).join(''));\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n","// main.js\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, appendImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('#load-more-btn');\nconst loader = document.createElement('div');\nloader.classList.add('loader', 'hidden');\ndocument.body.appendChild(loader);\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = event.currentTarget.elements.searchQuery.value.trim();\n  if (!currentQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search query' });\n    return;\n  }\n\n  try {\n    loader.classList.remove('hidden');\n    gallery.innerHTML = '';\n    currentPage = 1;\n    const data = await fetchImages(currentQuery, currentPage);\n\n    loader.classList.add('hidden');\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    renderGallery(data.hits);\n    if (data.totalHits > 15) {\n      loadMoreBtn.classList.remove('hidden');\n    }\n\n    smoothScroll(gallery);\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n    loader.classList.add('hidden');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    currentPage += 1;\n    loader.classList.remove('hidden');\n    const data = await fetchImages(currentQuery, currentPage);\n    loader.classList.add('hidden');\n\n    appendImages(data.hits);\n    if (currentPage * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.error({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    smoothScroll(gallery);\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n    loader.classList.add('hidden');\n  }\n});\n\nfunction smoothScroll(element) {\n  const { height: cardHeight } =\n    element.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","images","gallery","SimpleLightbox","appendImages","form","loadMoreBtn","loader","currentPage","currentQuery","event","iziToast","data","smoothScroll","error","element","cardHeight"],"mappings":"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"}